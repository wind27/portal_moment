<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wind.entity.Token">

	<resultMap id="tokenMap" type="com.wind.entity.Token">
		<id column="id" property="id" jdbcType="BIGINT" />
	 	<result column="uid" property="uid" jdbcType="BIGINT" />
        <result column="app_token" property="appToken" jdbcType="VARCHAR" />
		<result column="pc_token" property="pcToken" jdbcType="VARCHAR" />
	</resultMap>

	<insert id="insert" parameterType="com.wind.entity.Token"
		useGeneratedKeys="true" keyProperty="id">
		insert into token 
			(uid,app_token,pc_token) 
  		values 
  			(#{uid},#{appToken},#{pcToken})
	</insert>

	<update id="update" parameterType="com.wind.entity.Token">
		update basic 
		<set>
			<if test="appToken != null">
				app_token = #{appToken},
			</if>
			<if test="pcToken != null">
				pc_token = #{pcToken},
			</if>
		</set>
		where 
			uid = #{uid}
	</update>
 
	<select id="findById" parameterType="long" resultMap="tokenMap">
		 select id,uid,app_token,pc_token from token where tkey = #{tkey}
	</select>

	<select id="findByUid" parameterType="map" resultMap="tokenMap">
		select id,uid,app_token,pc_token from token where uid = #{uid} limit 1
	</select>
	 
</mapper>
